<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTubeé¢‘é“æ‰¹é‡ä¸‹è½½å™¨ - è‡ªåŠ¨ç›‘æ§ç‰ˆ</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 10px;
      font-size: 32px;
      font-weight: 700;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .step {
      margin-bottom: 30px;
      padding: 25px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      background: #fafafa;
      transition: all 0.3s ease;
    }

    .step:hover {
      border-color: #667eea;
      background: white;
    }

    .step h2 {
      font-size: 20px;
      margin-bottom: 15px;
      color: #444;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .step-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 30px;
      height: 30px;
      background: #667eea;
      color: white;
      border-radius: 50%;
      font-size: 16px;
      font-weight: bold;
    }

    textarea {
      width: 100%;
      height: 120px;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 6px;
      resize: vertical;
      font-size: 14px;
      font-family: monospace;
      transition: border-color 0.3s;
    }

    textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      margin-top: 10px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }

    button:active {
      transform: translateY(0);
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .controls label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      cursor: pointer;
    }

    .controls input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .controls select {
      padding: 8px 15px;
      border: 2px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    .controls select:focus {
      outline: none;
      border-color: #667eea;
    }

    #videoList {
      max-height: 500px;
      overflow-y: auto;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      background: white;
    }

    .video-item {
      display: flex;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid #eee;
      transition: background 0.2s;
    }

    .video-item:hover {
      background: #f5f5f5;
    }

    .video-item:last-child {
      border-bottom: none;
    }

    .video-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-right: 15px;
      cursor: pointer;
    }

    .video-item img {
      width: 160px;
      height: 90px;
      object-fit: cover;
      border-radius: 6px;
      margin-right: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .video-info {
      flex: 1;
    }

    .video-info h3 {
      font-size: 15px;
      margin-bottom: 8px;
      color: #333;
      line-height: 1.4;
    }

    .video-info span {
      font-size: 13px;
      color: #999;
    }

    .video-info .video-meta {
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }

    .video-info .video-date {
      color: #666;
      font-size: 13px;
    }

    .progress-item {
      padding: 15px;
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      background: white;
    }

    .progress-title {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      font-size: 14px;
      color: #333;
    }

    .progress-bar {
      width: 100%;
      height: 24px;
      background: #f0f0f0;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 8px;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: 600;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: #666;
    }

    .status-icon {
      font-size: 20px;
    }

    .loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }

    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }

    .stats {
      display: flex;
      gap: 20px;
      margin-top: 10px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 6px;
    }

    .stat-item {
      flex: 1;
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #667eea;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }

    /* åŠ è½½ä¸­æ–‡æœ¬åŠ¨ç”» */
    .loading-text {
      color: #667eea;
      font-style: italic;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* è¯¦æƒ…åŠ è½½é€šçŸ¥æ ·å¼ */
    #details-loading-notice {
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ç›‘æ§ç®¡ç†æ ·å¼ */
    .monitoring-status {
      background: #f0f8ff;
      border: 2px solid #4a90e2;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
    }

    .status-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .status-row:last-child {
      margin-bottom: 0;
    }

    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 600;
    }

    .status-badge.running {
      background: #4caf50;
      color: white;
    }

    .status-badge.stopped {
      background: #f44336;
      color: white;
    }

    .status-badge.disabled {
      background: #9e9e9e;
      color: white;
    }

    .channel-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid #e0e0e0;
      transition: background 0.2s;
    }

    .channel-item:hover {
      background: #f5f5f5;
    }

    .channel-item:last-child {
      border-bottom: none;
    }

    .channel-info {
      flex: 1;
    }

    .channel-info strong {
      display: block;
      font-size: 15px;
      color: #333;
      margin-bottom: 5px;
    }

    .channel-info small {
      font-size: 12px;
      color: #999;
    }

    .channel-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* å¼€å…³æ ·å¼ */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    .toggle-switch input:checked + .toggle-slider {
      background-color: #4caf50;
    }

    .toggle-switch input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }

    .delete-btn {
      background: #f44336 !important;
      padding: 6px 15px !important;
      font-size: 13px !important;
      margin: 0 !important;
    }

    .delete-btn:hover {
      background: #d32f2f !important;
    }

    /* è§†é¢‘åˆ—è¡¨æ ·å¼ */
    .video-list {
      padding: 10px 15px;
      background: #f9f9f9;
      border-top: 1px solid #e0e0e0;
    }

    .video-item-simple {
      display: flex;
      gap: 12px;
      padding: 12px;
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .video-item-simple:last-child {
      margin-bottom: 0;
    }

    .video-item-simple img {
      width: 120px;
      height: 68px;
      object-fit: cover;
      border-radius: 4px;
      flex-shrink: 0;
    }

    .video-details {
      flex: 1;
      min-width: 0;
    }

    .video-title {
      font-size: 14px;
      font-weight: 500;
      color: #333;
      margin-bottom: 8px;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .video-meta {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 6px;
    }

    .video-discovered {
      font-size: 11px;
      color: #999;
    }

    .status-badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }

    .status-not_started {
      background: #f5f5f5;
      color: #999;
    }

    .status-pending {
      background: #fff3e0;
      color: #ff9800;
    }

    .status-downloading {
      background: #e3f2fd;
      color: #2196f3;
      animation: pulse 1.5s ease-in-out infinite;
    }

    .status-completed {
      background: #e8f5e9;
      color: #4caf50;
    }

    .status-failed {
      background: #ffebee;
      color: #f44336;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .retry-btn {
      background: #ff9800 !important;
      padding: 4px 12px !important;
      font-size: 12px !important;
      margin: 0 !important;
      border-radius: 4px;
    }

    .retry-btn:hover {
      background: #f57c00 !important;
    }

    .expand-icon {
      display: inline-block;
      width: 16px;
      font-size: 12px;
      transition: transform 0.3s;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¬ YouTubeé¢‘é“æ‰¹é‡ä¸‹è½½å™¨</h1>
    <p class="subtitle">æ”¯æŒè‡ªåŠ¨ç›‘æ§é¢‘é“æ›´æ–°ã€æ‰¹é‡ä¸‹è½½è§†é¢‘ã€å¤šç”»è´¨é€‰æ‹©</p>

    <!-- è‡ªåŠ¨ç›‘æ§ç®¡ç† -->
    <section class="step" id="monitoringSection">
      <h2><span class="step-number">âš™ï¸</span> è‡ªåŠ¨ç›‘æ§ç®¡ç†</h2>

      <!-- ç›‘æ§çŠ¶æ€ -->
      <div class="monitoring-status">
        <div class="status-row">
          <strong>ç›‘æ§çŠ¶æ€:</strong>
          <span id="monitoringStatus" class="status-badge">åŠ è½½ä¸­...</span>
          <button onclick="checkNow()" style="margin-left: 10px; padding: 8px 20px;">ğŸ”„ ç«‹å³æ£€æŸ¥</button>
        </div>
        <div class="status-row">
          <strong>ä¸‹è½½é˜Ÿåˆ—:</strong>
          <span id="queueStatus">ç­‰å¾…ä¸­ 0, ä¸‹è½½ä¸­ 0</span>
        </div>
      </div>

      <!-- æ·»åŠ é¢‘é“ -->
      <div class="add-channel-form">
        <h3 style="margin: 20px 0 10px 0; font-size: 16px; color: #555;">æ·»åŠ ç›‘æ§é¢‘é“</h3>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          <input type="text" id="monitorChannelUrl" placeholder="YouTubeé¢‘é“URL"
                 style="flex: 1; min-width: 300px; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px;">
          <input type="text" id="monitorChannelName" placeholder="é¢‘é“åç§°ï¼ˆå¯é€‰ï¼‰"
                 style="flex: 1; min-width: 200px; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px;">
          <button onclick="addMonitorChannel()" style="padding: 10px 25px;">â• æ·»åŠ </button>
        </div>
      </div>

      <!-- é¢‘é“åˆ—è¡¨ -->
      <div class="monitored-channels">
        <h3 style="margin: 20px 0 10px 0; font-size: 16px; color: #555;">
          å·²ç›‘æ§é¢‘é“ (<span id="channelCount">0</span>)
        </h3>
        <div id="channelList" style="border: 1px solid #e0e0e0; border-radius: 6px; background: white; min-height: 100px;">
          <div style="padding: 20px; text-align: center; color: #999;">æš‚æ— ç›‘æ§é¢‘é“</div>
        </div>
      </div>
    </section>

  </div>

  <script>
    // Socket.ioè¿æ¥
    const socket = io();

    // å…¨å±€å˜é‡
    let allVideos = [];

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¶é•¿
    // ==========================================
    function formatDuration(seconds) {
      if (!seconds) return 'æœªçŸ¥æ—¶é•¿';
      const hours = Math.floor(seconds / 3600);
      const minutes = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;

      if (hours > 0) {
        return `${hours}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
      }
      return `${minutes}:${String(secs).padStart(2, '0')}`;
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¥æœŸ
    // ==========================================
    function formatDate(dateString) {
      if (!dateString) return 'æœªçŸ¥æ—¥æœŸ';

      // è§£æYYYYMMDDæ ¼å¼
      const year = dateString.substring(0, 4);
      const month = dateString.substring(4, 6);
      const day = dateString.substring(6, 8);

      // è¿”å›å‹å¥½æ ¼å¼
      return `${year}å¹´${month}æœˆ${day}æ—¥`;
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šè·å–è§†é¢‘åˆ—è¡¨
    // ==========================================
    async function fetchVideos() {
      const urls = document.getElementById('channelUrls').value
        .split('\n')
        .filter(url => url.trim());

      if (urls.length === 0) {
        alert('âš ï¸ è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªé¢‘é“URL');
        return;
      }

      const fetchBtn = document.getElementById('fetchBtn');
      const fetchBtnText = document.getElementById('fetchBtnText');

      fetchBtn.disabled = true;
      fetchBtnText.innerHTML = '<span class="loading"></span> å¿«é€Ÿè·å–åŸºæœ¬ä¿¡æ¯ä¸­ï¼ˆ15-30ç§’ï¼‰...';

      try {
        const response = await fetch('/api/channels/fetch', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ channelUrls: urls })
        });

        const result = await response.json();

        if (result.success && result.channels.length > 0) {
          displayVideos(result.channels);
          document.getElementById('videoSection').style.display = 'block';
          showDetailsLoadingNotice(result.totalVideos);
          alert(`âœ… å·²åŠ è½½ ${result.totalVideos} ä¸ªè§†é¢‘ï¼\n\næ—¥æœŸå’Œæ—¶é•¿ä¿¡æ¯æ­£åœ¨åå°åŠ è½½ï¼Œè¯·ç¨å€™...`);
        } else {
          alert('âŒ æœªèƒ½è·å–åˆ°ä»»ä½•è§†é¢‘ï¼Œè¯·æ£€æŸ¥é¢‘é“URLæ˜¯å¦æ­£ç¡®');
        }
      } catch (error) {
        console.error('è·å–è§†é¢‘åˆ—è¡¨å¤±è´¥:', error);
        alert('âŒ è·å–è§†é¢‘åˆ—è¡¨å¤±è´¥: ' + error.message);
      } finally {
        fetchBtn.disabled = false;
        fetchBtnText.innerHTML = 'ğŸ” è·å–è§†é¢‘åˆ—è¡¨';
      }
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ˜¾ç¤ºè§†é¢‘åˆ—è¡¨
    // ==========================================
    function displayVideos(channels) {
      const videoList = document.getElementById('videoList');
      videoList.innerHTML = '';

      allVideos = [];

      // åˆå¹¶æ‰€æœ‰é¢‘é“çš„è§†é¢‘
      channels.forEach(channel => {
        if (channel.videos && channel.videos.length > 0) {
          allVideos = allVideos.concat(channel.videos);
        }
      });

      document.getElementById('videoCount').textContent = allVideos.length;

      if (allVideos.length === 0) {
        videoList.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“­</div>
            <p>æœªæ‰¾åˆ°ä»»ä½•è§†é¢‘</p>
          </div>
        `;
        return;
      }

      // æ¸²æŸ“æ¯ä¸ªè§†é¢‘
      allVideos.forEach(video => {
        const div = document.createElement('div');
        div.className = 'video-item';
        div.id = `video-${video.id}`;

        // åˆ¤æ–­æ˜¯å¦æœ‰è¯¦ç»†ä¿¡æ¯
        const durationDisplay = video.duration !== null
          ? formatDuration(video.duration)
          : '<span class="loading-text">åŠ è½½ä¸­...</span>';

        const dateDisplay = video.upload_date !== null
          ? formatDate(video.upload_date)
          : '<span class="loading-text">åŠ è½½ä¸­...</span>';

        div.innerHTML = `
          <input type="checkbox" class="video-checkbox" data-video='${JSON.stringify(video)}'>
          <img src="${video.thumbnail}" alt="${video.title}" onerror="this.src='https://via.placeholder.com/160x90?text=æ— ç¼©ç•¥å›¾'">
          <div class="video-info">
            <h3>${video.title}</h3>
            <div class="video-meta">
              <span id="duration-${video.id}">â±ï¸ ${durationDisplay}</span>
              <span class="video-date" id="date-${video.id}">ğŸ“… ${dateDisplay}</span>
            </div>
          </div>
        `;
        videoList.appendChild(div);
      });
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ˜¾ç¤ºè¯¦æƒ…åŠ è½½é€šçŸ¥
    // ==========================================
    function showDetailsLoadingNotice(totalVideos) {
      // åœ¨è§†é¢‘åˆ—è¡¨ä¸Šæ–¹æ˜¾ç¤ºåŠ è½½è¿›åº¦æ¡
      const videoSection = document.getElementById('videoSection');

      // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨é€šçŸ¥
      let noticeDiv = document.getElementById('details-loading-notice');
      if (!noticeDiv) {
        noticeDiv = document.createElement('div');
        noticeDiv.id = 'details-loading-notice';
        noticeDiv.style.cssText = `
          padding: 15px;
          margin-bottom: 15px;
          background: #fff3cd;
          border: 1px solid #ffc107;
          border-radius: 6px;
          display: flex;
          align-items: center;
          justify-content: space-between;
        `;

        noticeDiv.innerHTML = `
          <div>
            <strong>ğŸ“¡ æ­£åœ¨åå°åŠ è½½è¯¦ç»†ä¿¡æ¯</strong>
            <div style="margin-top: 5px; font-size: 13px; color: #666;">
              è¿›åº¦: <span id="details-progress-text">0/${totalVideos}</span>
            </div>
          </div>
          <button onclick="cancelDetailsLoading()" style="padding: 6px 12px; font-size: 13px;">å–æ¶ˆ</button>
        `;

        videoSection.insertBefore(noticeDiv, document.getElementById('videoList'));
      }
    }

    // ç§»é™¤åŠ è½½é€šçŸ¥
    function removeDetailsLoadingNotice() {
      const noticeDiv = document.getElementById('details-loading-notice');
      if (noticeDiv) {
        noticeDiv.remove();
      }
    }

    // å–æ¶ˆè¯¦æƒ…åŠ è½½
    function cancelDetailsLoading() {
      if (currentTaskId) {
        socket.emit('video:details:cancel', { taskId: currentTaskId });
        removeDetailsLoadingNotice();
        alert('âš ï¸ å·²å–æ¶ˆè¯¦ç»†ä¿¡æ¯åŠ è½½');
      }
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šå…¨é€‰/å–æ¶ˆå…¨é€‰
    // ==========================================
    function toggleSelectAll() {
      const selectAll = document.getElementById('selectAll');
      const checkboxes = document.querySelectorAll('.video-checkbox');

      checkboxes.forEach(checkbox => {
        checkbox.checked = selectAll.checked;
      });
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šå¼€å§‹ä¸‹è½½
    // ==========================================
    async function startDownload() {
      const checkboxes = document.querySelectorAll('.video-checkbox:checked');
      const videos = Array.from(checkboxes).map(cb => JSON.parse(cb.dataset.video));

      if (videos.length === 0) {
        alert('âš ï¸ è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªè§†é¢‘');
        return;
      }

      const quality = document.getElementById('quality').value;

      try {
        const response = await fetch('/api/downloads/start', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ videos, quality })
        });

        const result = await response.json();

        if (result.success) {
          document.getElementById('progressSection').style.display = 'block';
          document.getElementById('totalCount').textContent = videos.length;
          document.getElementById('completedCount').textContent = '0';
          document.getElementById('failedCount').textContent = '0';

          // æ»šåŠ¨åˆ°è¿›åº¦åŒºåŸŸ
          document.getElementById('progressSection').scrollIntoView({ behavior: 'smooth' });

          alert(`âœ… å·²å¼€å§‹ä¸‹è½½ ${result.count} ä¸ªè§†é¢‘ï¼`);
        }
      } catch (error) {
        console.error('å¯åŠ¨ä¸‹è½½å¤±è´¥:', error);
        alert('âŒ å¯åŠ¨ä¸‹è½½å¤±è´¥: ' + error.message);
      }
    }

    // ==========================================
    // Socket.ioäº‹ä»¶ï¼šä¸‹è½½è¿›åº¦æ›´æ–°
    // ==========================================
    socket.on('download:progress', (data) => {
      updateProgressUI(data);
    });

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ›´æ–°è¿›åº¦UI
    // ==========================================
    function updateProgressUI(data) {
      let progressDiv = document.getElementById(`progress-${data.id}`);

      if (!progressDiv) {
        progressDiv = document.createElement('div');
        progressDiv.id = `progress-${data.id}`;
        progressDiv.className = 'progress-item';
        document.getElementById('downloadProgress').appendChild(progressDiv);
      }

      const statusIcon = data.status === 'completed' ? 'âœ…' :
                        data.status === 'failed' ? 'âŒ' : 'â¬‡ï¸';

      const progress = Math.round(data.progress || 0);

      progressDiv.innerHTML = `
        <div class="progress-title">
          <span class="status-icon">${statusIcon}</span>
          <span>${data.title}</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" style="width: ${progress}%">
            ${progress > 10 ? progress + '%' : ''}
          </div>
        </div>
        <div class="progress-info">
          <span>${progress}%</span>
          <span>${data.speed || ''}</span>
        </div>
      `;

      // æ›´æ–°ç»Ÿè®¡
      updateStats();
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ›´æ–°ç»Ÿè®¡æ•°æ®
    // ==========================================
    function updateStats() {
      const progressItems = document.querySelectorAll('.progress-item');
      let completed = 0;
      let failed = 0;

      progressItems.forEach(item => {
        const icon = item.querySelector('.status-icon').textContent;
        if (icon === 'âœ…') completed++;
        if (icon === 'âŒ') failed++;
      });

      document.getElementById('completedCount').textContent = completed;
      document.getElementById('failedCount').textContent = failed;
    }

    // ==========================================
    // Socket.ioè¿æ¥äº‹ä»¶
    // ==========================================
    socket.on('connect', () => {
      console.log('å·²è¿æ¥åˆ°æœåŠ¡å™¨');
    });

    socket.on('disconnect', () => {
      console.log('ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥');
    });

    // ==========================================
    // Socket.ioäº‹ä»¶ï¼šè§†é¢‘è¯¦æƒ…æ›´æ–°
    // ==========================================
    let currentTaskId = null;
    let detailsProgress = { current: 0, total: 0, completed: 0, failed: 0 };

    // è¯¦æƒ…è·å–å¼€å§‹
    socket.on('video:details:start', (data) => {
      console.log('å¼€å§‹è·å–è§†é¢‘è¯¦æƒ…:', data);
      currentTaskId = data.taskId;
      detailsProgress = {
        current: 0,
        total: data.total,
        completed: 0,
        failed: 0
      };
    });

    // å•ä¸ªè§†é¢‘è¯¦æƒ…æ›´æ–°
    socket.on('video:details:update', (data) => {
      const { videoId, details, progress, error } = data;

      // æ›´æ–°è¿›åº¦
      if (progress) {
        detailsProgress = progress;
        updateDetailsProgress(progress);
      }

      // æ›´æ–°UI
      if (!error && details) {
        updateVideoDetails(videoId, details);
      } else if (error) {
        markVideoDetailsError(videoId);
      }
    });

    // è¯¦æƒ…è·å–å®Œæˆ
    socket.on('video:details:complete', (data) => {
      console.log('è§†é¢‘è¯¦æƒ…è·å–å®Œæˆ:', data);
      removeDetailsLoadingNotice();
      currentTaskId = null;

      alert(`âœ… è¯¦ç»†ä¿¡æ¯åŠ è½½å®Œæˆï¼\n\næˆåŠŸ: ${data.completed}ä¸ª\nå¤±è´¥: ${data.failed}ä¸ª`);
    });

    // ä»»åŠ¡å–æ¶ˆç¡®è®¤
    socket.on('video:details:cancelled', (data) => {
      console.log('ä»»åŠ¡å·²å–æ¶ˆ:', data);
      if (data.success) {
        removeDetailsLoadingNotice();
        currentTaskId = null;
      }
    });

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ›´æ–°è¯¦æƒ…åŠ è½½è¿›åº¦
    // ==========================================
    function updateDetailsProgress(progress) {
      const progressText = document.getElementById('details-progress-text');
      if (progressText) {
        progressText.textContent = `${progress.current}/${progress.total} (æˆåŠŸ: ${progress.completed}, å¤±è´¥: ${progress.failed})`;
      }
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ›´æ–°å•ä¸ªè§†é¢‘çš„è¯¦ç»†ä¿¡æ¯
    // ==========================================
    function updateVideoDetails(videoId, details) {
      // æ›´æ–°æ—¶é•¿
      const durationElem = document.getElementById(`duration-${videoId}`);
      if (durationElem) {
        durationElem.innerHTML = `â±ï¸ ${formatDuration(details.duration)}`;
      }

      // æ›´æ–°æ—¥æœŸ
      const dateElem = document.getElementById(`date-${videoId}`);
      if (dateElem) {
        dateElem.innerHTML = `ğŸ“… ${formatDate(details.upload_date)}`;
      }

      // æ›´æ–° allVideos æ•°ç»„ä¸­çš„æ•°æ®
      const videoIndex = allVideos.findIndex(v => v.id === videoId);
      if (videoIndex !== -1) {
        allVideos[videoIndex].duration = details.duration;
        allVideos[videoIndex].upload_date = details.upload_date;
        allVideos[videoIndex].detailsLoading = false;

        // æ›´æ–° checkbox çš„ data-video å±æ€§
        const checkbox = document.querySelector(`input[data-video*='"id":"${videoId}"']`);
        if (checkbox) {
          checkbox.setAttribute('data-video', JSON.stringify(allVideos[videoIndex]));
        }
      }
    }

    // ==========================================
    // åŠŸèƒ½å‡½æ•°ï¼šæ ‡è®°è§†é¢‘è¯¦æƒ…è·å–å¤±è´¥
    // ==========================================
    function markVideoDetailsError(videoId) {
      const durationElem = document.getElementById(`duration-${videoId}`);
      if (durationElem) {
        durationElem.innerHTML = `â±ï¸ <span style="color: #999;">è·å–å¤±è´¥</span>`;
      }

      const dateElem = document.getElementById(`date-${videoId}`);
      if (dateElem) {
        dateElem.innerHTML = `ğŸ“… <span style="color: #999;">è·å–å¤±è´¥</span>`;
      }
    }

    // ==========================================
    // ç›‘æ§ç®¡ç†åŠŸèƒ½
    // ==========================================

    // åŠ è½½ç›‘æ§çŠ¶æ€
    async function loadMonitoringStatus() {
      try {
        const response = await fetch('/api/monitor/status');
        const result = await response.json();

        if (result.success) {
          updateMonitoringUI(result);
        }
      } catch (error) {
        console.error('åŠ è½½ç›‘æ§çŠ¶æ€å¤±è´¥:', error);
      }
    }

    // æ›´æ–°ç›‘æ§UI
    function updateMonitoringUI(data) {
      // æ›´æ–°ç›‘æ§çŠ¶æ€
      const statusBadge = document.getElementById('monitoringStatus');
      const isRunning = data.monitoring?.status?.running;
      const isEnabled = data.monitoring?.enabled;

      if (isEnabled && isRunning) {
        statusBadge.textContent = 'è¿è¡Œä¸­';
        statusBadge.className = 'status-badge running';
      } else if (isEnabled && !isRunning) {
        statusBadge.textContent = 'å·²åœæ­¢';
        statusBadge.className = 'status-badge stopped';
      } else {
        statusBadge.textContent = 'å·²ç¦ç”¨';
        statusBadge.className = 'status-badge disabled';
      }

      // æ›´æ–°é˜Ÿåˆ—çŠ¶æ€
      if (data.queue) {
        document.getElementById('queueStatus').textContent =
          `ç­‰å¾…ä¸­ ${data.queue.pending || 0}, ä¸‹è½½ä¸­ ${data.queue.active || 0}`;
      }

      // æ›´æ–°é¢‘é“åˆ—è¡¨
      if (data.channels) {
        renderChannels(data.channels);
      }
    }

    // æ¸²æŸ“é¢‘é“åˆ—è¡¨
    function renderChannels(channels) {
      const channelList = document.getElementById('channelList');
      document.getElementById('channelCount').textContent = channels.length;

      if (channels.length === 0) {
        channelList.innerHTML = '<div style="padding: 20px; text-align: center; color: #999;">æš‚æ— ç›‘æ§é¢‘é“</div>';
        return;
      }

      const html = channels.map(ch => `
        <div class="channel-item">
          <div class="channel-info" onclick="toggleVideos('${ch.id}')" style="cursor: pointer;">
            <strong>
              <span class="expand-icon" id="icon-${ch.id}">â–¶</span>
              ${escapeHtml(ch.name || ch.url)}
            </strong>
            <small>
              ${ch.url}<br>
              æœ€åæ£€æŸ¥: ${ch.lastCheckAt ? new Date(ch.lastCheckAt).toLocaleString('zh-CN') : 'ä»æœª'}
            </small>
          </div>
          <div class="channel-actions">
            <label class="toggle-switch">
              <input type="checkbox" ${ch.enabled ? 'checked' : ''}
                     onchange="toggleChannel('${ch.id}', this.checked)">
              <span class="toggle-slider"></span>
            </label>
            <button class="delete-btn" onclick="removeChannel('${ch.id}')">åˆ é™¤</button>
          </div>
        </div>
        <!-- è§†é¢‘åˆ—è¡¨ï¼ˆé»˜è®¤éšè—ï¼‰ -->
        <div class="video-list" id="videos-${ch.id}" style="display: none;">
          <div class="loading">åŠ è½½ä¸­...</div>
        </div>
      `).join('');

      channelList.innerHTML = html;
    }

    // HTMLè½¬ä¹‰ï¼ˆé˜²æ­¢XSSï¼‰
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // æ·»åŠ ç›‘æ§é¢‘é“
    async function addMonitorChannel() {
      const url = document.getElementById('monitorChannelUrl').value.trim();
      const name = document.getElementById('monitorChannelName').value.trim();

      if (!url) {
        alert('âŒ è¯·è¾“å…¥é¢‘é“URL');
        return;
      }

      // ç®€å•éªŒè¯URLæ ¼å¼
      if (!url.includes('youtube.com')) {
        alert('âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„YouTubeé¢‘é“URL');
        return;
      }

      try {
        const response = await fetch('/api/monitor/channels/add', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ url, name })
        });

        const result = await response.json();

        if (result.success) {
          alert('âœ… é¢‘é“å·²æ·»åŠ åˆ°ç›‘æ§åˆ—è¡¨');
          document.getElementById('monitorChannelUrl').value = '';
          document.getElementById('monitorChannelName').value = '';
          loadMonitoringStatus();
        } else {
          alert('âŒ ' + result.message);
        }
      } catch (error) {
        console.error('æ·»åŠ é¢‘é“å¤±è´¥:', error);
        alert('âŒ æ·»åŠ é¢‘é“å¤±è´¥: ' + error.message);
      }
    }

    // åˆ‡æ¢é¢‘é“å¼€å…³
    async function toggleChannel(id, enabled) {
      try {
        const response = await fetch('/api/monitor/channels/toggle', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ id, enabled })
        });

        const result = await response.json();

        if (result.success) {
          console.log(`âœ… é¢‘é“å·²${enabled ? 'å¯ç”¨' : 'ç¦ç”¨'}`);
          loadMonitoringStatus();
        } else {
          alert('âŒ ' + result.message);
          loadMonitoringStatus(); // é‡æ–°åŠ è½½ä»¥æ¢å¤å¼€å…³çŠ¶æ€
        }
      } catch (error) {
        console.error('åˆ‡æ¢é¢‘é“çŠ¶æ€å¤±è´¥:', error);
        alert('âŒ æ“ä½œå¤±è´¥: ' + error.message);
        loadMonitoringStatus();
      }
    }

    // åˆ é™¤é¢‘é“
    async function removeChannel(id) {
      if (!confirm('ç¡®å®šè¦åˆ é™¤æ­¤é¢‘é“å—ï¼Ÿ')) {
        return;
      }

      try {
        const response = await fetch(`/api/monitor/channels/${id}`, {
          method: 'DELETE'
        });

        const result = await response.json();

        if (result.success) {
          alert('âœ… é¢‘é“å·²åˆ é™¤');
          loadMonitoringStatus();
        } else {
          alert('âŒ ' + result.message);
        }
      } catch (error) {
        console.error('åˆ é™¤é¢‘é“å¤±è´¥:', error);
        alert('âŒ åˆ é™¤å¤±è´¥: ' + error.message);
      }
    }

    // æ‰‹åŠ¨ç«‹å³æ£€æŸ¥
    async function checkNow() {
      try {
        const response = await fetch('/api/monitor/check-now', {
          method: 'POST'
        });

        const result = await response.json();

        if (result.success) {
          alert('âœ… ' + result.message);
        } else {
          alert('âŒ ' + result.message);
        }
      } catch (error) {
        console.error('æ‰‹åŠ¨æ£€æŸ¥å¤±è´¥:', error);
        alert('âŒ æ£€æŸ¥å¤±è´¥: ' + error.message);
      }
    }

    // ==========================================
    // è§†é¢‘åˆ—è¡¨å±•å¼€/æŠ˜å åŠŸèƒ½
    // ==========================================

    // åˆ‡æ¢è§†é¢‘åˆ—è¡¨æ˜¾ç¤º
    async function toggleVideos(channelId) {
      const videoList = document.getElementById(`videos-${channelId}`);
      const icon = document.getElementById(`icon-${channelId}`);

      if (videoList.style.display === 'none') {
        // å±•å¼€ï¼šåŠ è½½è§†é¢‘åˆ—è¡¨
        icon.textContent = 'â–¼';
        videoList.style.display = 'block';
        await loadChannelVideos(channelId);
      } else {
        // æŠ˜å 
        icon.textContent = 'â–¶';
        videoList.style.display = 'none';
      }
    }

    // åŠ è½½é¢‘é“è§†é¢‘åˆ—è¡¨
    async function loadChannelVideos(channelId) {
      const videoList = document.getElementById(`videos-${channelId}`);

      try {
        const response = await fetch(`/api/channels/${channelId}/videos?limit=5`);
        const result = await response.json();

        if (result.success) {
          if (result.isFirstCheck && result.videos.length === 0) {
            // é¢‘é“ä»æœªæ£€æŸ¥è¿‡
            videoList.innerHTML = `
              <div style="padding: 20px; text-align: center; color: #999;">
                <p>â³ è¯¥é¢‘é“å°šæœªè¿›è¡Œé¦–æ¬¡æ£€æŸ¥</p>
                <p style="font-size: 12px; margin-top: 5px;">è¯·ç‚¹å‡»ä¸Šæ–¹çš„"ğŸ”„ ç«‹å³æ£€æŸ¥"æŒ‰é’®å¼€å§‹ç›‘æ§</p>
              </div>
            `;
          } else if (result.videos.length > 0) {
            renderVideoList(channelId, result.videos);
          } else {
            // å·²æ£€æŸ¥ä½†æš‚æ— è§†é¢‘
            videoList.innerHTML = '<div style="padding: 15px; color: #999;">âœ“ è¯¥é¢‘é“æš‚æ— æ–°è§†é¢‘</div>';
          }
        } else {
          videoList.innerHTML = `<div style="padding: 15px; color: #f44336;">âŒ ${result.message || 'åŠ è½½å¤±è´¥'}</div>`;
        }
      } catch (error) {
        console.error('åŠ è½½è§†é¢‘å¤±è´¥:', error);
        videoList.innerHTML = `
          <div style="padding: 15px; text-align: center;">
            <p style="color: #f44336;">âŒ åŠ è½½å¤±è´¥</p>
            <button onclick="loadChannelVideos('${channelId}')" style="margin-top: 10px; padding: 6px 15px; font-size: 13px;">
              ğŸ”„ é‡è¯•
            </button>
          </div>
        `;
      }
    }

    // æ¸²æŸ“è§†é¢‘åˆ—è¡¨
    function renderVideoList(channelId, videos) {
      const videoList = document.getElementById(`videos-${channelId}`);

      const html = videos.map(video => {
        const statusInfo = getStatusDisplay(video.downloadStatus);
        const canRetry = video.downloadStatus === 'failed' && video.retryCount < 2;

        return `
          <div class="video-item-simple">
            <img src="${video.thumbnail}" alt="${escapeHtml(video.title)}">
            <div class="video-details">
              <div class="video-title">${escapeHtml(video.title)}</div>
              <div class="video-meta">
                <span class="status-badge status-${video.downloadStatus}" data-video-id="${video.id}">
                  ${statusInfo.icon} ${statusInfo.text}
                </span>
                ${canRetry ? `<button class="retry-btn" onclick="retryDownload('${video.downloadId}', '${channelId}')">ğŸ”„ é‡è¯•</button>` : ''}
              </div>
              <div class="video-discovered">
                å‘ç°äº ${formatDiscoveredTime(video.discoveredAt)}
              </div>
            </div>
          </div>
        `;
      }).join('');

      videoList.innerHTML = html;
    }

    // æ ¼å¼åŒ–å‘ç°æ—¶é—´
    function formatDiscoveredTime(dateString) {
      if (!dateString) return 'æœªçŸ¥æ—¶é—´';
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now - date;
      const diffMins = Math.floor(diffMs / 60000);
      const diffHours = Math.floor(diffMs / 3600000);
      const diffDays = Math.floor(diffMs / 86400000);

      if (diffMins < 1) return 'åˆšåˆš';
      if (diffMins < 60) return `${diffMins}åˆ†é’Ÿå‰`;
      if (diffHours < 24) return `${diffHours}å°æ—¶å‰`;
      if (diffDays < 7) return `${diffDays}å¤©å‰`;

      return date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });
    }

    // è·å–çŠ¶æ€æ˜¾ç¤º
    function getStatusDisplay(status) {
      const statusMap = {
        'not_started': { icon: 'â¸ï¸', text: 'æœªä¸‹è½½', color: '#999' },
        'pending': { icon: 'â³', text: 'é˜Ÿåˆ—ä¸­', color: '#ff9800' },
        'downloading': { icon: 'â¬‡ï¸', text: 'ä¸‹è½½ä¸­', color: '#2196f3' },
        'completed': { icon: 'âœ…', text: 'å·²å®Œæˆ', color: '#4caf50' },
        'failed': { icon: 'âŒ', text: 'å¤±è´¥', color: '#f44336' }
      };
      return statusMap[status] || statusMap['not_started'];
    }

    // æ‰‹åŠ¨é‡è¯•ä¸‹è½½
    async function retryDownload(downloadId, channelId) {
      try {
        const response = await fetch(`/api/downloads/${downloadId}/retry`, {
          method: 'POST'
        });

        const result = await response.json();

        if (result.success) {
          alert('âœ… å·²åŠ å…¥é‡è¯•é˜Ÿåˆ—');
          // åˆ·æ–°è§†é¢‘åˆ—è¡¨
          await loadChannelVideos(channelId);
        } else {
          alert('âŒ ' + result.message);
        }
      } catch (error) {
        console.error('é‡è¯•å¤±è´¥:', error);
        alert('âŒ é‡è¯•å¤±è´¥: ' + error.message);
      }
    }

    // ==========================================
    // Socket.io ç›‘æ§äº‹ä»¶ç›‘å¬
    // ==========================================

    // ç›‘æ§æ–°è§†é¢‘äº‹ä»¶
    socket.on('monitoring:new-video', (data) => {
      console.log('ğŸ†• å‘ç°æ–°è§†é¢‘:', data);
      loadMonitoringStatus();
    });

    // ç›‘æ§æ£€æŸ¥å®Œæˆäº‹ä»¶
    socket.on('monitoring:check-complete', (data) => {
      console.log('âœ… ç›‘æ§æ£€æŸ¥å®Œæˆ:', data);
      if (data.newVideos > 0) {
        alert(`ğŸ†• å‘ç° ${data.newVideos} ä¸ªæ–°è§†é¢‘ï¼Œå·²åŠ å…¥ä¸‹è½½é˜Ÿåˆ—`);

        // å¦‚æœæœ‰å¯¹åº”é¢‘é“çš„è§†é¢‘åˆ—è¡¨å·²å±•å¼€ï¼Œè‡ªåŠ¨åˆ·æ–°
        if (data.channelId) {
          const videoList = document.getElementById(`videos-${data.channelId}`);
          if (videoList && videoList.style.display !== 'none') {
            console.log(`ğŸ”„ è‡ªåŠ¨åˆ·æ–°é¢‘é“ ${data.channelId} çš„è§†é¢‘åˆ—è¡¨`);
            loadChannelVideos(data.channelId);
          }
        }
      }
      loadMonitoringStatus();
    });

    // é˜Ÿåˆ—çŠ¶æ€æ›´æ–°
    socket.on('queue:status', (data) => {
      document.getElementById('queueStatus').textContent =
        `ç­‰å¾…ä¸­ ${data.pending || 0}, ä¸‹è½½ä¸­ ${data.active || 0}`;
    });

    // é…ç½®æ›´æ–°äº‹ä»¶
    socket.on('config:updated', (data) => {
      console.log('ğŸ“ é…ç½®å·²æ›´æ–°:', data);
      loadMonitoringStatus();
    });

    // ==========================================
    // Socket.io ä¸‹è½½çŠ¶æ€å®æ—¶æ›´æ–°
    // ==========================================

    // ä¸‹è½½è¿›åº¦æ›´æ–°
    socket.on('download:progress', (data) => {
      console.log('â¬‡ï¸ ä¸‹è½½è¿›åº¦æ›´æ–°:', data);
      updateVideoStatus(data.videoId, 'downloading');
    });

    // ä¸‹è½½å®Œæˆ
    socket.on('download:complete', (data) => {
      console.log('âœ… ä¸‹è½½å®Œæˆ:', data);
      updateVideoStatus(data.videoId, 'completed');
    });

    // ä¸‹è½½å¤±è´¥
    socket.on('download:failed', (data) => {
      console.log('âŒ ä¸‹è½½å¤±è´¥:', data);
      updateVideoStatus(data.videoId, 'failed');
    });

    // æ›´æ–°è§†é¢‘çŠ¶æ€å¾½ç« 
    function updateVideoStatus(videoId, status) {
      const statusBadges = document.querySelectorAll(`[data-video-id="${videoId}"]`);
      statusBadges.forEach(badge => {
        const statusInfo = getStatusDisplay(status);
        badge.className = `status-badge status-${status}`;
        badge.innerHTML = `${statusInfo.icon} ${statusInfo.text}`;
      });
    }

    // ==========================================
    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    // ==========================================

    // åˆå§‹åŒ–ç›‘æ§çŠ¶æ€
    loadMonitoringStatus();

    // æ¯30ç§’åˆ·æ–°ä¸€æ¬¡çŠ¶æ€
    setInterval(loadMonitoringStatus, 30000);

    // ==========================================
    // é¡µé¢å¸è½½æ—¶å–æ¶ˆä»»åŠ¡
    // ==========================================
    window.addEventListener('beforeunload', () => {
      if (currentTaskId) {
        // ä½¿ç”¨ sendBeacon å‘é€å–æ¶ˆè¯·æ±‚
        navigator.sendBeacon('/api/channels/cancel-details', JSON.stringify({ taskId: currentTaskId }));
      }
    });

    // é¡µé¢åŠ è½½å®Œæˆæç¤º
    console.log('%cğŸ¬ YouTubeé¢‘é“æ‰¹é‡ä¸‹è½½å™¨', 'color: #667eea; font-size: 24px; font-weight: bold;');
    console.log('%cå·²å°±ç»ªï¼å¼€å§‹è¾“å…¥é¢‘é“URLå§~', 'color: #764ba2; font-size: 14px;');
  </script>
</body>
</html>
